# Scripts –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è UI Dashboard

–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Gradio Web UI Dashboard.

## üìã –°–ø–∏—Å–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤

### 1. `run_ui.py` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
–ó–∞–ø—É—Å–∫–∞–µ—Ç Gradio –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é.

```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
python scripts/run_ui.py

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
python scripts/run_ui.py --port 8080 --share --config my_config.yaml
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--config PATH` - –ø—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (default: configs/ui_config.yaml)
- `--port PORT` - –ø–æ—Ä—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ (default: 7860)
- `--share` - —Å–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É —á–µ—Ä–µ–∑ Gradio
- `--debug` - —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏

### 2. `restart_ui.sh` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ üîÑ
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç UI.

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å default –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
./scripts/restart_ui.sh

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
./scripts/restart_ui.sh --port 8080 --share
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã UI
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å (SIGTERM)
- ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è (SIGKILL)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç PID –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
- ‚úÖ –°–æ–∑–¥–∞—ë—Ç –ª–æ–≥ —Ñ–∞–π–ª `ui_dashboard.log`

### 3. `stop_ui.sh` - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ UI ‚èπÔ∏è
–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π UI –ø—Ä–æ—Ü–µ—Å—Å.

```bash
./scripts/stop_ui.sh
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ß–∏—Ç–∞–µ—Ç PID –∏–∑ —Ñ–∞–π–ª–∞ `.ui_dashboard.pid`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å (SIGTERM)
- ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ (SIGKILL)
- ‚úÖ –û—á–∏—â–∞–µ—Ç PID —Ñ–∞–π–ª

### 4. `status_ui.sh` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ üìä
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º UI.

```bash
./scripts/status_ui.sh
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- ‚úÖ –°—Ç–∞—Ç—É—Å (–∑–∞–ø—É—â–µ–Ω/–Ω–µ –∑–∞–ø—É—â–µ–Ω)
- ‚úÖ PID –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ Uptime (–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (MB)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU (%)
- ‚úÖ –ü–æ—Ä—Ç –∏ URL
- ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–∞

## üöÄ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
./scripts/restart_ui.sh

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
xdg-open http://localhost:7860  # Linux
open http://localhost:7860      # macOS
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å UI
./scripts/restart_ui.sh

# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—â–µ–Ω –ª–∏ UI
./scripts/status_ui.sh
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UI
./scripts/stop_ui.sh
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f ui_dashboard.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -n 50 ui_dashboard.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep ERROR ui_dashboard.log
```

### –ó–∞–ø—É—Å–∫ –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
```bash
# –ï—Å–ª–∏ –ø–æ—Ä—Ç 7860 –∑–∞–Ω—è—Ç
./scripts/restart_ui.sh --port 8080
```

### –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø (Gradio share)
```bash
# –°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É
./scripts/restart_ui.sh --share

# Gradio —Å–æ–∑–¥–∞—Å—Ç URL –≤–∏–¥–∞: https://xxxxx.gradio.live
```

## üìÇ –°–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

### `.ui_dashboard.pid`
–§–∞–π–ª —Å PID –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.
- –°–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –£–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞

### `ui_dashboard.log`
–õ–æ–≥ —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- –°–æ–¥–µ—Ä–∂–∏—Ç stdout –∏ stderr
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Ç—ë—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ
- –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç
lsof -i :7860

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
./scripts/restart_ui.sh --port 8080
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ—Ü–µ—Å—Å –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PID
cat .ui_dashboard.pid

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É–±–∏—Ç—å
kill -9 $(cat .ui_dashboard.pid)

# –û—á–∏—Å—Ç–∏—Ç—å PID —Ñ–∞–π–ª
rm -f .ui_dashboard.pid
```

### –ü—Ä–æ–±–ª–µ–º–∞: UI –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f ui_dashboard.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip list | grep gradio

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade gradio plotly networkx psutil
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
grep -i error ui_dashboard.log | tail -n 20

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ debug —Ä–µ–∂–∏–º–µ
python scripts/run_ui.py --debug
```

## üí° –°–æ–≤–µ—Ç—ã

### Auto-start –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
–î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:

```bash
# –û—Ç–∫—Ä—ã—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É
@reboot cd /path/to/NM_LLM_Test_2 && ./scripts/restart_ui.sh
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ systemd (Linux)
–°–æ–∑–¥–∞–π—Ç–µ systemd service –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª /etc/systemd/system/moe-dashboard.service
[Unit]
Description=MoE System Dashboard
After=network.target

[Service]
Type=simple
User=your_username
WorkingDirectory=/path/to/NM_LLM_Test_2
ExecStart=/path/to/NM_LLM_Test_2/scripts/restart_ui.sh
Restart=always

[Install]
WantedBy=multi-user.target

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
sudo systemctl enable moe-dashboard
sudo systemctl start moe-dashboard

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status moe-dashboard
```

### Rotation –ª–æ–≥–æ–≤
–ß—Ç–æ–±—ã –ª–æ–≥ —Ñ–∞–π–ª –Ω–µ —Ä–æ—Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ:

```bash
# –°–æ–∑–¥–∞—Ç—å /etc/logrotate.d/moe-dashboard
/path/to/NM_LLM_Test_2/ui_dashboard.log {
    daily
    rotate 7
    compress
    missingok
    notifempty
}
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **UI Guide**: `docs/UI_DASHBOARD_GUIDE.md`
- **Architecture**: `docs/Plans/20260106_ARCHITECTURE.md`
- **API Reference**: `docs/Plans/20260106_API_REFERENCE.md`

---

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2026-01-07
