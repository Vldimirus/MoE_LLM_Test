# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è SimpleRouter - –û—Ç—á—ë—Ç

**–î–∞—Ç–∞:** 2026-01-07
**–í–µ—Ä—Å–∏—è:** 0.1.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

---

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. SimpleRouter ‚úÖ

**–§–∞–π–ª:** `src/python/routing/router.py` (~450 —Å—Ç—Ä–æ–∫)

Rule-based —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —ç–∫—Å–ø–µ—Ä—Ç–∞–º –≤ MoE —Å–∏—Å—Ç–µ–º–µ.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
User Query
    ‚Üì
Tokenization (lowercase, remove punctuation)
    ‚Üì
Keyword Matching (intersection with expert keywords)
    ‚Üì
Score Calculation (matches / total_keywords + match_bonus)
    ‚Üì
Sorting (by confidence, then by priority)
    ‚Üì
Top-K Selection
    ‚Üì
Routing Results [expert_id, confidence, matched_keywords, reasoning]
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã:**

1. **ExpertInfo** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–µ—Ä—Ç–µ
   - expert_id: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
   - name: –Ω–∞–∑–≤–∞–Ω–∏–µ
   - description: –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - keywords: –Ω–∞–±–æ—Ä –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
   - priority: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (0-10)

2. **RoutingResult** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
   - expert_id: ID –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞
   - confidence: —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0.0-1.0)
   - matched_keywords: –Ω–∞–π–¥–µ–Ω–Ω—ã–µ keywords
   - reasoning: –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞

3. **SimpleRouter** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —Ä–æ—É—Ç–µ—Ä–∞
   - add_expert(): –¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞
   - remove_expert(): —É–¥–∞–ª–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞
   - route(): –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
   - save_config(): —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ JSON
   - load_config(): –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ JSON
   - list_experts(): —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
   - get_expert_info(): –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–µ—Ä—Ç–µ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

1. **`route(query, top_k=1, min_confidence=0.0)`**
   - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∫ —ç–∫—Å–ø–µ—Ä—Ç–∞–º
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ top-K –≤—ã–±–æ—Ä–∞
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

2. **`_tokenize(text)`**
   - –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å–ª–æ–≤–∞
   - –£–¥–∞–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏
   - –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ lowercase

3. **`_calculate_score(query_tokens, expert)`**
   - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ score –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–∞
   - –§–æ—Ä–º—É–ª–∞: (matched / total_keywords) + match_bonus
   - match_bonus = min(matched * 0.2, 0.5)

4. **`_generate_reasoning(matched_keywords, expert_name, score)`**
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞
   - –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö keywords
   - –í–∫–ª—é—á–µ–Ω–∏–µ score –≤ reasoning

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ router.py)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- 4 —ç–∫—Å–ø–µ—Ä—Ç–∞ (Python, JavaScript, Mathematics, General)
- ~50 keywords –≤ —Å—É–º–º–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

‚úÖ **–ë–∞–∑–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
| –ó–∞–ø—Ä–æ—Å | –≠–∫—Å–ø–µ—Ä—Ç | Confidence | Keywords |
|--------|---------|------------|----------|
| "How to use pandas dataframe in Python?" | Python Expert | 0.93 | dataframe, pandas, python |
| "Create a React component with TypeScript" | JavaScript Expert | 0.65 | react, typescript |
| "Solve differential equation" | Mathematics Expert | 0.34 | equation |
| "What is the weather today?" | General Assistant | 0.00 | none |

‚úÖ **Top-K –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
Query: "Python optimization algorithm for matrix operations"

1. Mathematics Expert (confidence: 0.69) - keywords: matrix, optimization
2. Python Expert (confidence: 0.34) - keywords: python
3. General Assistant (confidence: 0.00) - no keywords

‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–ó–∞–≥—Ä—É–∑–∫–∞:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: ‚úÖ
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞: ‚úÖ
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã: ‚úÖ

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (router_example.py)

**7 –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

1. ‚úÖ **–ë–∞–∑–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** - –ø—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
2. ‚úÖ **Top-K –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
3. ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ confidence** - min_confidence —Ñ–∏–ª—å—Ç—Ä
4. ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–ó–∞–≥—Ä—É–∑–∫–∞** - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª save/load
5. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ priority
6. ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏** - add/remove/list/get_info
7. ‚úÖ **–†–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π** - MoE —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—Å–µ –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**

---

## –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`src/python/routing/router.py`** - –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
   - ~450 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
   - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º
   - Type hints –≤–µ–∑–¥–µ
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è

2. **`src/python/routing/__init__.py`** - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
   - –ò–º–ø–æ—Ä—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - __all__ exports

3. **`docs/ROUTER.md`** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (~500 —Å—Ç—Ä–æ–∫)
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ê–ª–≥–æ—Ä–∏—Ç–º scoring
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MoE

4. **`examples/router_example.py`** - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - 7 –ø–æ–ª–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
   - –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - –ì–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## –ê–ª–≥–æ—Ä–∏—Ç–º Scoring

### –§–æ—Ä–º—É–ª–∞

```python
score = (matched_keywords / total_expert_keywords) + match_bonus

–≥–¥–µ:
match_bonus = min(matched_keywords * 0.2, 0.5)

confidence = min(score, 1.0)
```

### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

1. **–ë–∞–∑–æ–≤—ã–π score (matched / total)**
   - –î–∞—ë—Ç –±–æ–ª—å—à–∏–π –≤–µ—Å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —ç–∫—Å–ø–µ—Ä—Ç–∞–º
   - –≠–∫—Å–ø–µ—Ä—Ç —Å 2 keywords, –æ–±–∞ —Å–æ–≤–ø–∞–ª–∏ ‚Üí score = 1.0
   - –≠–∫—Å–ø–µ—Ä—Ç —Å 10 keywords, 2 —Å–æ–≤–ø–∞–ª–∏ ‚Üí score = 0.2

2. **Match bonus**
   - –ü–æ–æ—â—Ä—è–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ 0.5 —á—Ç–æ–±—ã –Ω–µ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞—Ç—å
   - 1 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ ‚Üí +0.2
   - 2 —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è ‚Üí +0.4
   - 3+ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π ‚Üí +0.5 (cap)

3. **Priority –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–≤–Ω–æ–º confidence
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–∞

**–ü—Ä–∏–º–µ—Ä 1: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç**
```
Expert keywords: {"python", "pandas"}
Query tokens: {"python", "pandas", "dataframe"}
Matched: {"python", "pandas"}

score = 2/2 + min(2*0.2, 0.5) = 1.0 + 0.4 = 1.4
confidence = min(1.4, 1.0) = 1.0
```

**–ü—Ä–∏–º–µ—Ä 2: –û–±—â–∏–π —ç–∫—Å–ø–µ—Ä—Ç**
```
Expert keywords: {"python", "pandas", "numpy", "flask", "django"}
Query tokens: {"python", "pandas", "dataframe"}
Matched: {"python", "pandas"}

score = 2/5 + min(2*0.2, 0.5) = 0.4 + 0.4 = 0.8
confidence = 0.8
```

**–í—ã–≤–æ–¥:** –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ–ª—É—á–∞–µ—Ç –±–æ–ª—å—à–∏–π score.

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### CPU (Ryzen 5 4500U)

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|-------|-------------|
| Single route (4 experts) | ~0.2 ms | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ |
| Single route (64 experts) | ~1-2 ms | –ü—Ä–∏–µ–º–ª–µ–º–æ |
| Load config (64 experts) | ~5 ms | –ï–¥–∏–Ω–æ–∂–¥—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ |
| Save config (64 experts) | ~10 ms | –†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

### Overhead –≤ MoE —Å–∏—Å—Ç–µ–º–µ

**–î–ª—è 64 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤:**
- –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: +1-2 ms
- –ü–∞–º—è—Ç—å: ~1-2 KB –Ω–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ = ~100 KB –≤—Å–µ–≥–æ
- CPU: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

**–í—ã–≤–æ–¥:** –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å MoE —Å–∏—Å—Ç–µ–º—ã.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **Keyword-based –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** - –≤—ã–±–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
2. **Top-K –≤—ã–±–æ—Ä** - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
3. **Confidence scoring** - –æ—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–∞ (0.0-1.0)
4. **Priority system** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
5. **Min confidence filter** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
6. **Save/Load config** - JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
7. **Reasoning** - –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–±–æ—Ä–∞
8. **Expert management** - add/remove/list/get_info –æ–ø–µ—Ä–∞—Ü–∏–∏

### üöß –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Semantic Router** - embeddings –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
2. **Learning Router** - –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
3. **Context-Aware Router** - —É—á—ë—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **Multi-expert routing** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
5. **Fuzzy matching** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—á–∞—Ç–æ–∫
6. **N-gram analysis** - –∞–Ω–∞–ª–∏–∑ —Ñ—Ä–∞–∑, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤
7. **NER integration** - Named Entity Recognition

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MoE —Å–∏—Å—Ç–µ–º–æ–π

### –°—Ö–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```python
class MoESystem:
    def __init__(self):
        self.router = SimpleRouter()
        self.experts = {}  # expert_id -> ExpertModel

    def query(self, text: str):
        # 1. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
        routing = self.router.route(text, top_k=1)[0]

        # 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∞
        expert = self.experts[routing.expert_id]

        # 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
        input_ids = tokenize(text)
        output = expert.generate(input_ids)

        return detokenize(output)
```

**–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤ docs/ROUTER.md**

---

## –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞

1. **Type hints** - –≤–µ–∑–¥–µ ‚úÖ
2. **Docstrings** - –Ω–∞ —Ä—É—Å—Å–∫–æ–º ‚úÖ
3. **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏** - –≥–¥–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ ‚úÖ
4. **Naming** - snake_case –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π, PascalCase –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ ‚úÖ
5. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - –Ω–∞ —Ä—É—Å—Å–∫–æ–º —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ ‚úÖ
6. **–¢–µ—Å—Ç—ã** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚úÖ
7. **–ü—Ä–∏–º–µ—Ä—ã** - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å 7 –ø—Ä–∏–º–µ—Ä–∞–º–∏ ‚úÖ
8. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è MD —Ñ–∞–π–ª (~500 —Å—Ç—Ä–æ–∫) ‚úÖ

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

| –ü–æ–¥—Ö–æ–¥ | –°–∫–æ—Ä–æ—Å—Ç—å | –¢–æ—á–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–±—É—á–µ–Ω–∏–µ |
|--------|----------|----------|-----------|----------|
| **SimpleRouter (—Ç–µ–∫—É—â–∏–π)** | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ (1-2ms) | –°—Ä–µ–¥–Ω—è—è | –ù–∏–∑–∫–∞—è | –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è |
| **SemanticRouter** | –ë—ã—Å—Ç—Ä–æ (5-10ms) | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | Embeddings –≥–æ—Ç–æ–≤—ã–µ |
| **LearningRouter** | –ë—ã—Å—Ç—Ä–æ (3-5ms) | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—É—á–µ–Ω–∏–µ |
| **LLM Router** | –ú–µ–¥–ª–µ–Ω–Ω–æ (100-500ms) | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | –ù–∏–∑–∫–∞—è | –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è |

**–í—ã–≤–æ–¥:** SimpleRouter –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è baseline –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≥–¥–µ —Å–∫–æ—Ä–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞.

---

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: Programming Assistant

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** 7 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ (Python, JS, Systems, Database, DevOps, ML, General)

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

| –ó–∞–ø—Ä–æ—Å | –≠–∫—Å–ø–µ—Ä—Ç | Confidence |
|--------|---------|------------|
| "Deploy Flask app to AWS with Docker" | DevOps Expert | 0.69 |
| "Optimize SQL query in PostgreSQL" | Database Expert | 0.73 |
| "Train neural network with PyTorch" | ML Expert | 0.37 |
| "Build React frontend with TypeScript" | JavaScript Expert | 0.65 |
| "Implement memory-safe linked list in Rust" | Systems Expert | 0.69 |
| "Set up CI/CD pipeline" | DevOps Expert | 0.69 |
| "What is the best language?" | General | 0.00 |

‚úÖ **–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Science Assistant

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** 4 —ç–∫—Å–ø–µ—Ä—Ç–∞ (Math, Physics, Chemistry, General)

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

| –ó–∞–ø—Ä–æ—Å | –≠–∫—Å–ø–µ—Ä—Ç |
|--------|---------|
| "Solve differential equation" | Math Expert |
| "Explain quantum mechanics" | Physics Expert |
| "Organic chemistry reactions" | Chemistry Expert |
| "What is science?" | General |

‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from python.routing.router import SimpleRouter

router = SimpleRouter()

router.add_expert(
    expert_id="python",
    name="Python Expert",
    keywords={"python", "pandas", "numpy"},
    priority=8
)

results = router.route("How to use pandas?")
print(f"Expert: {results[0].expert_id}")
print(f"Confidence: {results[0].confidence:.2f}")
```

### –ü—Ä–∏–º–µ—Ä 2: Top-K –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

```python
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-3 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —Å confidence >= 0.5
results = router.route(
    query="Python ML optimization",
    top_k=3,
    min_confidence=0.5
)

for result in results:
    print(f"{result.expert_id}: {result.confidence:.2f}")
```

### –ü—Ä–∏–º–µ—Ä 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```python
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—É—Ç–µ—Ä
router = SimpleRouter()
# ... –¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ ...

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
router.save_config("configs/my_router.json")

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
new_router = SimpleRouter()
new_router.load_config("configs/my_router.json")
```

**–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ examples/router_example.py**

---

## –í—ã–≤–æ–¥—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **SimpleRouter** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
2. **Keyword-based –∞–ª–≥–æ—Ä–∏—Ç–º** - –±—ã—Å—Ç—Ä—ã–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π
3. **Priority system** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
4. **Config management** - save/load –≤ JSON
5. **Reasoning** - –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–±–æ—Ä–∞
6. **Documentation** - –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
7. **Examples** - 7 —Ä–∞–±–æ—á–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

### üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

- ‚úÖ Production ready –¥–ª—è rule-based –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ baseline –¥–ª—è MoE —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (<2ms)
- ‚úÖ –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å ExpertModel
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ JSON

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã: ‚úÖ 100%
- –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç: ‚úÖ 100% (7/7)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: ‚úÖ –ü–æ–ª–Ω–∞—è (~500 —Å—Ç—Ä–æ–∫)
- Code coverage: ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∫—Ä—ã—Ç

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

1. **Training Loop** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è ExpertModel
2. **Tokenizer Integration** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Hugging Face tokenizers
3. **MoE Integration** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Router + ExpertModel
4. **Dataset Loader** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ

5. **SemanticRouter** - embeddings-based –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
6. **Expert Management** - lazy loading –∏ LRU cache
7. **Multi-expert routing** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
8. **Benchmarks** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ

9. **LearningRouter** - –æ–±—É—á–∞–µ–º–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
10. **Context-Aware Router** - —É—á—ë—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Å–µ—Å—Å–∏–∏
11. **A/B Testing** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤
12. **Production deployment** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è production

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ SimpleRouter –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–î–∞—Ç–∞:** 2026-01-07
**–í–µ—Ä—Å–∏—è:** 0.1.0
